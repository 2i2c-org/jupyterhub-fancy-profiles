<style>{% include 'style.css' %}</style>
<div class="form-group" id="kubespawner-profiles-list">
  {%- for profile in profile_list %}
    {#- Wrap everything in a label tag so clicking anywhere selects the option #}
    <label for="profile-item-{{ profile.slug }}" class="profile">
      <div style="width: 100%">
        <h4>Image</h4>
        <p>Use a mybinder.org compatible repository to build the environment</p>
        <div class="option">
          <label>Repo</label>
          <input class="form-control" type="text">
        </input>
      </div>
      <div class="option">
        <label>Ref</label>
        <input class="form-control" type="text">
      </input>
    </div>
    <div class="panel panel-default">
      <div class="panel-heading">Build Logs</div>
      <div class="panel-body">
        <div id="terminal">Building image...</div>
      </div>
    </div>
    <div class="option" style="float: right">
      <input type="button" id="submit" class="btn btn-jupyter" value="Build image">
    </input>
    </div>

    <br />
    <br />
  <h4>Resources</h4>
  {%- if profile.profile_options %}
    <div>
      {%- for k, option in profile.profile_options.items() %}
        <div class="option">
          <label for="profile-option-{{ profile.slug }}-{{ k }}">{{ option.display_name }}</label>
          <select name="profile-option-{{ profile.slug }}-{{ k }}" class="form-control">
            {%- for k, choice in option['choices'].items() %}
              <option value="{{ k }}" {% if choice.default %}selected{% endif %}>{{ choice.display_name }}</option>
            {%- endfor %}
          </select>
        </div>
      {%- endfor %}
    </div>
  {%- endif %}
</div>
</label>
{%- endfor %}
</div>
<link rel="stylesheet" href="https://unpkg.com/xterm@5.0.0/css/xterm.css" />
<script src="https://unpkg.com/xterm@5.0.0/lib/xterm.js"
        type="text/javascript"></script>
<script>
    $(document).ready(function() {
        let term = new Terminal();
        term.open(document.getElementById('terminal'));
        term.write('Hello from \x1B[1;3;31mxterm.js\x1B[0m $ ')
    });
</script>
